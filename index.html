<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Congress Presider Elite</title>

  <style>
    /* =====================
       ROOT VARIABLES
    ===================== */
    :root {
      --primary: #0071e3;
      --primary-dark: #0062c4;
      --secondary: #34c759;
      --danger: #ff3b30;
      --bg: #f5f5f7;
      --card-bg: rgba(255, 255, 255, 0.85);
      --text: #1d1d1f;
      --text-light: #86868b;
      --transition: all 0.35s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      overflow: hidden;
    }

    /* =====================
       OVERLAY
    ===================== */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(20px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: var(--transition);
    }

    .overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .overlay-content {
      background: var(--card-bg);
      padding: 2rem;
      border-radius: 18px;
      max-width: 500px;
      width: 90%;
      text-align: center;
    }

    .sheet-input {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    input, button {
      padding: 0.75rem 1rem;
      border-radius: 12px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }

    button {
      background: var(--primary);
      color: white;
      cursor: pointer;
      border: none;
    }

    button:hover {
      background: var(--primary-dark);
    }

    /* =====================
       STATUS BAR
    ===================== */
    .status-bar {
      position: fixed;
      top: 0;
      width: 100%;
      height: 44px;
      background: rgba(255,255,255,0.9);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 1rem;
      z-index: 50;
    }

    .nav-links a {
      margin-right: 1rem;
      text-decoration: none;
      color: var(--text);
      font-weight: 500;
    }

    /* =====================
       MAIN CONTENT
    ===================== */
    .main-content {
      padding-top: 44px;
      height: 100vh;
    }

    iframe {
      width: 100%;
      height: calc(100vh - 44px);
      border: none;
    }

    /* =====================
       TIMER
    ===================== */
    .timer-container {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      background: var(--card-bg);
      padding: 1.25rem;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      cursor: move;
    }

    .timer-display {
      font-size: 2rem;
      text-align: center;
      margin: 0.75rem 0;
      font-family: monospace;
    }

    .timer-buttons {
      display: grid;
      grid-template-columns: repeat(3,1fr);
      gap: 0.5rem;
    }

    .start-btn { background: var(--secondary); }
    .stop-btn { background: var(--danger); }
    .reset-btn { background: #e5e5ea; color: black; }

    /* =====================
       MODALS
    ===================== */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
    }

    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }

    .modal-content {
      background: var(--card-bg);
      padding: 2rem;
      border-radius: 16px;
      max-width: 800px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
  </style>
</head>

<body>

<!-- OVERLAY -->
<div class="overlay" id="overlay">
  <div class="overlay-content">
    <h1>Congress Presider Elite</h1>
    <p>Paste your Google Sheet link</p>
    <div class="sheet-input">
      <input id="sheetUrl" placeholder="https://docs.google.com/spreadsheets/d/..." />
      <button id="loadSheet">Load</button>
    </div>
  </div>
</div>

<!-- STATUS BAR -->
<div class="status-bar">
  <div class="nav-links">
    <a href="#" id="toggleTimer">Timer</a>
    <a href="#" id="showMotions">Motions</a>
    <a href="#" id="showScripts">Scripts</a>
  </div>
  <div id="currentTime"></div>
</div>

<!-- MAIN -->
<div class="main-content">
  <iframe id="sheetIframe"></iframe>
</div>

<!-- TIMER -->
<div class="timer-container" id="timerPanel">
  <h3>Congress Timer</h3>
  <div class="timer-display" id="timer">00:00:00.00</div>
  <div class="timer-buttons">
    <button class="start-btn" id="startBtn">Start</button>
    <button class="stop-btn" id="stopBtn">Stop</button>
    <button class="reset-btn" id="resetBtn">Reset</button>
  </div>
</div>

<!-- MODALS -->
<div class="modal" id="motionsModal">
  <div class="modal-content">
    <h2>Motions Guide</h2>
    <p>Previous Question – 2/3</p>
    <button onclick="closeModal('motionsModal')">Close</button>
  </div>
</div>

<div class="modal" id="scriptsModal">
  <div class="modal-content">
    <h2>PO Scripts</h2>
    <p>1 tap at 2:00 · 2 taps at 2:30 · 3 taps at 2:50</p>
    <button onclick="closeModal('scriptsModal')">Close</button>
  </div>
</div>

<script>
/* =====================
   GOOGLE SHEET
===================== */
const overlay = document.getElementById('overlay');
const iframe = document.getElementById('sheetIframe');

document.getElementById('loadSheet').onclick = () => {
  const url = document.getElementById('sheetUrl').value;
  const match = url.match(/\/d\/([^/]+)/);
  if (!match) return alert('Invalid Sheet URL');

  const id = match[1];
  iframe.src = `https://docs.google.com/spreadsheets/d/${id}/preview`;
  localStorage.setItem('sheetId', id);
  overlay.classList.add('hidden');
};

window.onload = () => {
  const saved = localStorage.getItem('sheetId');
  if (saved) {
    iframe.src = `https://docs.google.com/spreadsheets/d/${saved}/preview`;
    overlay.classList.add('hidden');
  }
};

/* =====================
   CLOCK
===================== */
setInterval(() => {
  document.getElementById('currentTime').textContent =
    new Date().toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });
}, 1000);

/* =====================
   TIMER
===================== */
let startTime, interval, running = false, elapsed = 0;
const display = document.getElementById('timer');

document.getElementById('startBtn').onclick = () => {
  if (running) return;
  running = true;
  startTime = Date.now() - elapsed;
  interval = setInterval(() => {
    elapsed = Date.now() - startTime;
    const t = new Date(elapsed);
    display.textContent = t.toISOString().substr(11, 8);
  }, 10);
};

document.getElementById('stopBtn').onclick = () => {
  running = false;
  clearInterval(interval);
};

document.getElementById('resetBtn').onclick = () => {
  elapsed = 0;
  display.textContent = '00:00:00';
};

/* =====================
   MODALS
===================== */
document.getElementById('showMotions').onclick = () =>
  openModal('motionsModal');

document.getElementById('showScripts').onclick =
  () => openModal('scriptsModal');

function openModal(id) {
  document.getElementById(id).classList.add('active');
}

function closeModal(id) {
  document.getElementById(id).classList.remove('active');
}
</script>

</body>
</html>
